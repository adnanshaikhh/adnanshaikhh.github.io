<!DOCTYPE html>
<html>
  <head>
  <!-- Main/Important Meta -->
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wallpaper Algorithm &#8226; Adnan Shaikh</title>

  <!-- Icons -->
  <link rel="apple-touch-icon" href="/images/me.jpg"/>
  <link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64" href="/favicon.ico" />

  <!-- Styles -->
  
  <style type="text/css">#navigation{text-align:center}#navigation a{margin:1em;display:inline-block}div.site-content{margin-left:auto;margin-right:auto;margin-top:40px;padding-left:10px;padding-right:10px}@font-face{font-family:Vollkorn;font-style:normal;src:url(/assets/fonts/Vollkorn-Regular.otf);font-display:fallback}body{font-family:'Vollkorn', serif;font-feature-settings:'lnum';color:#112;background-color:#fffff8;font-size:17.8px}p,li{font-size:1.3em;font-size:17.8px}ul,ol{margin-block-start:0em;margin-block-end:0em}p{margin-block-start:0.25em;margin-block-end:0.25em}header,main{padding:0 20px}.wrapper{margin-top:10%}a:link,a:visited,a:hover,a:active{color:#b58900;text-decoration:none}a:hover{text-decoration:underline}.shadow-img{box-shadow:0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)}h2,h3{margin-block-start:0.50em;margin-block-end:0.25em}h4{margin-block-start:1.5em;margin-block-end:-0.8em}.main-list-item{font-weight:bold;font-size:1.2em;margin:0.8em 0}.fa-ul.main-list{margin-left:0}.main-list-item-icon{width:36px;color:#112}.logo-container{text-align:center}.logo{width:96px;height:96px;display:inline-block;background-size:cover;border-radius:50%;-moz-border-radius:50%;border:2px solid #fffff8;box-shadow:0 0 0 3px #112}.author-container h1{font-size:2.8em;margin-top:0;margin-bottom:0;text-align:center}.tagline-container p{font-size:1.3em;text-align:center;margin-bottom:2em}hr{border:0;height:1px;background-image:-webkit-linear-gradient(left, rgba(0,0,0,0), #112, rgba(0,0,0,0));background-image:-moz-linear-gradient(left, rgba(0,0,0,0), #112, rgba(0,0,0,0));background-image:-ms-linear-gradient(left, rgba(0,0,0,0), #112, rgba(0,0,0,0));background-image:-o-linear-gradient(left, rgba(0,0,0,0), #112, rgba(0,0,0,0))}footer{position:fixed;bottom:0;right:0;height:20px}.poweredby{font-family:"Arial Narrow", Arial;font-size:0.6em;line-height:0.6em;padding:0 5px;margin-top:30px;text-align:center}@media (min-width: 480px){.wrapper{width:480px;margin:2.5% auto 0 auto}div.site-content{width:480px}}@media (min-width: 768px){.wrapper{width:680px}div.site-content{width:680px}header{float:left;width:30%;text-align:right}.author-container h1,.logo-container,.tagline-container p{text-align:right}main{width:62%;margin-left:43%;padding:0}}@media (max-width: 768px){header ul span.fa{float:left;padding-top:3px}}.social{text-align:center}.social li{display:inline-block;font-size:1px;padding-left:20px}#reddit-share{padding-left:0px}blockquote{background:#f9f9f9;border-left:10px solid #ccc;margin:1.5em 10px;padding:0.5em 10px;quotes:"“" "”" "‘" "’"}blockquote p{display:inline}table{border:collapse}th,td{padding:5px}table,th,td{border:1px solid #112}
</style>
  <link rel="preload" href="/assets/solarized.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="/assets/solarized.css"></noscript>
  <link rel="preload" as="font" type="font/woff2" crossorigin href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.woff2?v=4.3.0"/>
  <link rel="preload" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"></noscript>
  <link rel="canonical" href="/2019/01/27/algorithmic-wallpaper/">

  <!-- Meta information -->
  <meta name="author" content="Adnan Shaikh">
  <meta name="description" content="Adnan Shaikh's personal website and blog."/>
  <meta name="keywords" content="blog programming student resume technology talks">

  <!-- Open Graph tags (Facebook meta-info) -->
  <meta property="og:title" content="Wallpaper Algorithm - Adnan Shaikh"/>
  <meta property="og:url" content="adnanshaikh.com/2019/01/27/algorithmic-wallpaper/"/>
  <meta property="og:image" content="adnanshaikh.com/images/me.jpg"/>
  <meta property="og:description" content="Wallpapers for ages"/>
  <meta property="og:site_name" content="Adnan Shaikh's Blog"/>
  <meta property="og:see_also" content="adnanshaikh.com"/>

  <!-- Various Javascript -->
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-88085331-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'UA-88085331-1');
</script>
</head>

  <body>
  <div id="navigation" class="clearfix">
    <a href="/">home/</a>
    <a href="/blog">blog/</a>
    <a href="/resume">resume/</a>
    <a href="/now">now/</a>
    <a href="/impossible">impossible/</a>
    <a href="/kb">kb/</a>
  </div>

  <div class="site-content">
    <h1>Wallpaper Algorithm</h1>
<em>Adnan Shaikh &bull; 27 January 2019</em>

<p>I’m currently reading The New Turing Omnibus and one of the first exercises mentioned in Chapter 1 was implementing the Wallpaper algorithm with 3 colors. Although the premise of the chapter was to simply get acquainted with the conventions of how algorithms would be written in the book, they picked a pretty mesmerizing one. Here’s the algorithm, straight from the book.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>input side
for i ← 1 to 100
    for j ← 1 to 100
        x ← i * side/100
        y ← j * side/100
        c ← int(x*x + y*y)
        if c == 0
            then plot(x, y, red)
        else if c == 1
            then plot(x, y, green)
        else
            then plot(x, y, blue)
</code></pre></div></div>

<p>At the core of function is the statement <b><em>x<sup>2</sup> + y<sup>2</sup></em></b>, the circular function. At low side values you can see concentric circles forming.</p>

<p align="center"><img class="shadow-img" width="70%" src="/images/conc-circles.png" alt="conc-circles" /></p>

<p>As the side value increases, the concentric circles get denser and moiré patterns begin forming like so. Colors begin to overlap leading to some very cool patterns as the algorithm iterates over the side value.</p>

<p align="center"><img class="shadow-img" width="70%" src="/images/conc-moire-patterns.png" alt="conc-moire-patterns" /></p>

<p>Here’s a dynamic version implemented in JavaScript. I spent more time trying to get dynamic resizing to work than implementing the actual algorithm itself. <em>Yay software engineering</em>.</p>

<center>
<canvas class="shadow-img" id="wallpaperCanvas" width="100" height="500"></canvas>
</center>

<script>
    const canvas = document.getElementById("wallpaperCanvas")
    var ctx = canvas.getContext("2d")

    function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms))
    }

    function resizeCanvas() {
        const maxWidth = 500
        const minMarginPercent = 0.10

        var W = window.innerWidth
        var w = maxWidth
        var x = (W - w) / 2
        
        if (x/W < minMarginPercent) {
            canvas.width = (1 - 2*minMarginPercent) * window.innerWidth;
        }
        else {
            canvas.width = maxWidth;
        }
        ctx = canvas.getContext("2d")
        ctx.scale(2, 2);
        draw();
    }

    async function main() {
        if(!ctx) {
            alert("Couldn't grab canvas context")
            return
        }
        
        window.addEventListener('resize', resizeCanvas, false);
        resizeCanvas();
        while(true) {
            draw();
            await sleep(500)
        }
    }

    function draw() {
        if ( typeof draw.side == 'undefined' ) {
            draw.side = 1
        }
        
        var r, g, b
        var x, y, c
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        draw.side += 1
        for (var i = 0; i < canvas.width/2; i++) {
            for (var j = 0; j < canvas.height/2; j++) {
                x = i * draw.side/100
                y = j * draw.side/100
                c = Math.floor(x*x + y*y)
                if (c % 3 == 0) {
                    r = 255
                    g = 0
                    b = 0
                }
                else if (c % 3 == 1) {
                    r = 0
                    g = 255
                    b = 0
                }
                else {
                    r = 0
                    g = 0
                    b = 255
                }
                ctx.fillStyle = "rgba("+r+","+g+","+b+","+1+")"
                ctx.fillRect(i, j, 1, 1)
            }
        }
    }

    main();
</script>



<div class="social">
  <ul>
  </ul>
</div>
<hr>



</div>


  <div style="clear:both;"></div>
  <div class="poweredby">
      <!-- <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Made with <3</span></a> -->
  </div>
  </body>
</html>
